# X-Environment Configuration

## 概述

这是用来快速配置环境的bash/shell脚本。



## 安装

**1.克隆本仓库**

```sh
git clone https://github.com/1438802682/X.git
```

使用token克隆，或者上传密钥：

```sh
git clone https://[Token]@github.com/1438802682/X.git
```

**2.运行`i.sh`进行初始化操作**

```sh
bash _i.sh
```

如果要使用`source`或者`./`来运行时需要先添加权限再运行：

```
chmod +x _i.sh && ./_i.sh
```

**3.初始化后便可以在任意目录运行仓库中的脚本进行快速环境配置**



## 环境配置

### 文件架构

#### 基础环境

```sh
X/
├── _i.sh
├── _x.sh
├── v.sh
├── config/
│   └── .json
```

#### 特殊环境

```
X/
└── DL/
    └── _mm.sh

```

注：环境配置脚本前带有`_`标识符，常用程序脚本不带该表示符。



### 详细功能

#### 基础环境

##### `_i.sh`

**作用：**

1. 添加仓库路径到环境变量
2. 为所有 `.sh` 脚本添加执行权限

**补充：**

- 检测脚本是否都获得了运行权限是可选项，当脚本数量过多时检测可能会消耗大量时间



##### `_x.sh`

**作用：**

1. 安装编译工具（gcc、g++等）
2. 安装miniconda环境

**补充：**

- 无法自动拉去最新版本，需要手动更新下载源
- 自动检测Linux系统类别：Debian/rhel
- 自动检测是否已安装conda，如果已安装则会询问是否要安装最新版本
- 自动检测是否已将conda添加到环境变量中



##### `v.sh`

**作用：**

1. 配置v2ray

**补充：**

- 自动拉取最新版本进行安装，无需手动更新安装源
- 自动检测是否已安装v2ray
- 支持多节点切换（config文件夹存放配置文件）
- 自动检测配置文件是否存在
- 自动检测配置文件是否有效
- 询问用户是否开启全局模式（全局模式/手动模式）
- 自动检查并开启防火墙端口
- 支持后台运行，且自动记录与检测日志信息
- 开启服务后自动验证代理的有效性



#### 特殊环境



## 补充

**为什么我的`_i.sh`没有执行权限，但是当我运行`bash _i.sh`的时候能成功运行呢？而运行`./_i.sh`就不行呢**

当你运行 `bash i.sh` 时，你是在告诉系统使用 `bash` 命令来解释并执行 `i.sh` 脚本。在这种情况下，不需要对脚本文件本身设置执行权限，因为 `bash` 本身就有执行权限。

然而，当你使用 `./i.sh` 来运行脚本时，你实际上是在尝试直接执行这个文件。这就要求文件本身具有执行权限。如果文件没有执行权限，你会收到一个类似于 `Permission denied` 的错误。

要给 `i.sh` 脚本添加执行权限，你可以使用 `chmod` 命令：

```
chmod +x i.sh
```

现在，你应该可以使用 `./i.sh` 命令来运行脚本。



**`chmod +x i.sh && ./i.sh` `chmod +x i.sh ; ./i.sh` 上面这两种写法有何区别**

这两种写法的区别在于命令的执行逻辑：

1. `chmod +x i.sh && ./i.sh`：在这种写法中，`&&` 符号表示逻辑“与”。这意味着只有当 `chmod +x i.sh` 命令成功执行（返回值为0）时，才会执行 `./i.sh` 命令。如果第一个命令失败，那么第二个命令将不会执行。
2. `chmod +x i.sh ; ./i.sh`：在这种写法中，`;` 符号表示顺序执行。这意味着无论 `chmod +x i.sh` 命令是否成功执行，接下来都会执行 `./i.sh` 命令。这里的执行顺序不依赖于前一个命令的成功与否。

综上，这两种写法的主要区别在于，使用 `&&` 时，只有在前一个命令成功执行的情况下，才会执行后一个命令；而使用 `;` 时，无论前一个命令是否成功，后一个命令都会执行。
